<!DOCTYPE html>
<!-- saved from url=(0035)http://localhost:3000/radioStations -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="./Document2_files/styles.css">
  <link rel="icon" type="image/x-icon" href="./Document2_files/Logo.png">
</head>

<body>
  <nav>
    <ul>
      <li class="logo-nav"> <a href="http://localhost:3000/"><img src="./Document2_files/Logo.png" width="50" alt=""></a>
      </li>
      
        <li>Welcome, david.e.karlsson@telia.com
        </li>
        <hr>




        <li>Your Favorited Radio(s):

          0
<p>
          
  <a href="http://localhost:3000/radioStations">  	Newstalk ZB Auckland</a>
 

            
          </p>

          
            
                  ,	Polskie Radio Bialystok





             

                    

                    


                      


                       , 
Rete Toscana Classica
                        

                    
                        



                           



                        
                             
                             
                             

                             
                           


        </li>

        <li><a href="http://localhost:3000/logout">Log out</a></li><br>
        <li><a href="http://localhost:3000/delete" class="btn">Delete user</a></li>





        
    </ul>

  </nav>




  <main id="radio-api-section">

    <h3>Favourites</h3>
<p>
  	Newstalk ZB Auckland
  
  <audio controls="" class="audio-elem">
  
    <source src="type=&quot;audio/ogg&quot;">
    <source src="type=&quot;audio/mpeg&quot;">
    Your browser does not support the audio element.
    </audio>
  </p>



  


        
    <iframe class="radioFrame" src="./Document2_files/saved_resource.html"></iframe>

    <!-- <button><a href="http://localhost:8080/">radios</a></button> -->
    <ul>
    





    <form action="http://localhost:3000/favorite">

      <select name="radioPicker">

        


  

      </select>

<input type="text" id="SearchBar">

      <button>Add  to favorites</button>
           </form>
      
  </ul></main>
  <footer></footer>




    <script>







// window.onload = async (event) =>{
  
//   var dropDown = document.querySelector("radioPicker")



//   var options = {
//     method: 'GET',

//     params: {reverse: 'false', offset: '0', limit: '10', hidebroken: 'false'},
//     headers: {
//       'x-rapidapi-host': 'radio-browser.p.rapidapi.com',
//       'x-rapidapi-key': 'ad3c92741dmshe1e30f51eb1488dp1b285djsn2780563b1f51'
//     }}
// const data = await fetch("https://radio-browser.p.rapidapi.com/json/stations", options);
          
// console.log(data.json())

// // const statData = data.json()


// // statData.forEach(element => {
// //    var opt = document.createElement("option")
// // opt.value = element.name
// // dropDown.appendChild(opt)

// //   });
// console.log('Page Loaded');

// };







 

  






// document.addEventListener('keyDown', async (e) => {
//         // e.preventDefault();

//         console.log(SearchBar.value)





//         var options = {
//           method: 'GET',
//           url: 'https://radio-browser.p.rapidapi.com/json/stations/byname/'+ SearchBar.value,
//           params: {reverse: 'false', offset: '0', limit: '10', hidebroken: 'false'},
//           headers: {
//             'x-rapidapi-host': 'radio-browser.p.rapidapi.com',
//             'x-rapidapi-key': 'ad3c92741dmshe1e30f51eb1488dp1b285djsn2780563b1f51'
//           }
//         };
        
 

      
//         axios.request(options).then(function (response) {
//           response.data.forEach(element => {
        
        
//             res.locals.stSearch = element.name.concat(element.name)
//         });
//         }).catch(function (error) {
//           console.error(error);
//         });




// const res = await fetch('/radioStation', {
//             method: 'POST',
//             body: JSON.stringify({ Search }),
//             headers: { 'Content-Type': 'application/json' }
//           });


// });

        
const form = document.querySelector('form');

      form.addEventListener('submit', async (e) => {
  




        try {

          // const Search = form.SearchBar.value;
          const Id = form.radioPicker.value;
          // const FavUser = 'test@test.se';


          const res = await fetch('/favorite', {
            method: 'POST',
            body: JSON.stringify({ Id}),
            headers: { 'Content-Type': 'application/json' }
          });
          //   const data = await res.json();

          

          console.log(data);
          if (data.errors) {
            console.log(data.errors);
          }
          if (data) {
            location.assign('/');
          }

        }
        catch (err) {
          console.log(err);
        }

      })
    </script><script type="text/javascript" src="chrome-extension://aalppolilappfakpmdfdkpppdnhpgifn/installHook.js"></script></body></html>